# フェーズ2-5：共有パッケージ検証詳細計画

## 目的
- 共有パッケージ（`@docs/ui`, `@docs/theme`, `@docs/versioning`, `@docs/i18n`）の配布形態とバージョニング戦略を決定し、新ジェネレーターおよび将来の外部利用に備える。
- npm 公開と Git サブモジュールの双方で導入した際のメリット／デメリットを比較検証し、最適な運用モデルを確立する。

## スコープ
- パッケージビルド設定、型定義、依存関係の整理。
- リリースプロセス（バージョン管理、CHANGELOG、配布チャネル）の設計。
- セキュリティ・ライセンス・メンテナンス観点の評価。

## タスク
1. **ビルドおよび型定義整備**
   - Rollup / tsup などを用いたビルド設定検討。  
   - `.d.ts` 出力、ESM/CJS 対応要否の判断。  
   - CSS アセットの取り扱い（CSS Modules or plain CSS）。
2. **依存関係チェック**
   - 各パッケージの peerDependencies / dependencies を見直し、最小限にする。  
   - Astro / React / Vue など外部フレームワーク依存がないか確認。
3. **リリースフロー設計**
   - npm 公開手順（`npm publish --access public`）とバージョニングポリシー（SemVer）。  
   - GitHub Actions での自動リリース or 手動リリースの判断。  
   - サブモジュール運用時のアップデート手順・バージョンタグ付与方法。
4. **互換性検証**
   - サンプルプロジェクトで npm 版、サブモジュール版それぞれを導入し、ビルド＆ランタイム確認。  
   - 既存 libx-dev プロジェクトにも導入し、Breaking Change を洗い出す。
5. **ドキュメント・ライセンス**
   - `docs/new-generator-plan/guides/shared-packages.md` に利用方法、リリースフロー、サポートポリシーを記載。  
   - ライセンス情報（OSS 依存）を整理し、 NOTICE ファイルや README に反映。
6. **意思決定**
   - npm vs サブモジュールの比較表を作成し、DECISIONS.md に最終判断を記録。  
   - 将来的に npm 公開 + サブモジュール併用とする場合の運用ルールを定義。

## 成果物
- 更新された `packages/*` のビルド設定とリリーススクリプト。
- 互換検証レポートと比較表。
- 共有パッケージ利用ガイド。
- DECISIONS.md への記録。

## 完了条件
- 選定した配布方法で新ジェネレーターがビルド・実行できる。  
- リリースフローが文書化され、誰でも実行できる状態になっている。  
- 互換性テストで重大な問題が解消またはバックログ管理されている。
